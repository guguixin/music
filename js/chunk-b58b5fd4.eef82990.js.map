{"version":3,"sources":["webpack:///./src/views/RankingListson.vue?0d13","webpack:///src/views/RankingListson.vue","webpack:///./src/views/RankingListson.vue?71fd","webpack:///./src/views/RankingListson.vue","webpack:///./src/views/RankingListson.vue?8b3c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","listInfos","_e","_l","track","key","id","musicID","on","$event","$emit","isLoading","hotLists","length","allList","directives","name","rawName","value","expression","_v","_s","staticRenderFns","props","type","Object","data","page","perpage","timer","components","NewestMusic","Loading","methods","loadMore","clearInterval","setTimeout","onScroll","scrollHeight","scrollTop","clientHeight","beforeRouteEnter","next","vm","axios","beforeRouteLeave","window","removeEventListener","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,cAAc,CAACE,YAAY,iCAAiCC,MAAM,CAAC,IAAM,MAAM,GAAK,OAAQP,EAAa,UAAEI,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAO,GAAMP,EAAIQ,UAAqB,YAAG,IAAM,QAAQR,EAAIS,KAAKL,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIU,GAAIV,EAAY,UAAE,SAASW,GAAO,OAAOP,EAAG,eAAe,CAACQ,IAAID,EAAME,GAAGN,MAAM,CAAC,KAAOI,EAAM,QAAUX,EAAIc,SAASC,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOhB,EAAIiB,MAAM,OAAQD,UAAehB,EAAIkB,WAAalB,EAAImB,SAASC,QAAUpB,EAAIqB,QAAQD,OAAQhB,EAAG,WAAWJ,EAAIS,KAAKL,EAAG,IAAI,CAACkB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOzB,EAAIqB,QAAQD,OAAS,EAAGM,WAAW,uBAAuBpB,YAAY,cAAc,CAACN,EAAI2B,GAAG,IAAI3B,EAAI4B,GAAG5B,EAAImB,SAASC,QAAUpB,EAAIqB,QAAQD,OAAS,WAAa,UAAU,QAAQ,GAAGhB,EAAG,MAAM,CAACE,YAAY,iBAAiB,IACl7BuB,EAAkB,G,wDC8BtB,GACEC,MAAO,CACLhB,QAAS,CACPiB,KAAM,CAACC,OAAQ,QAGnBC,KANF,WAOI,MAAO,CACLzB,UAAW,KACXW,SAAU,GAEVE,QAAS,GAETa,KAAM,EAENC,QAAS,GAETjB,WAAW,EAEXkB,MAAO,OAGXC,WAAY,CACVC,YAAJ,OACIC,QAAJ,QAEEC,QAAS,CAEPC,SAFJ,WAEA,WAEMxC,KAAKiB,WAAY,EAEjBwB,cAAczC,KAAKmC,OACnBnC,KAAKmC,MAAQO,YAAW,WACtB,EAAR,OAEQ,IAAR,mBACA,uBACQ,EAAR,mDAIA,KACM1C,KAAKiB,WAAY,GAGnB0B,SApBJ,WAqBM,IAAN,wCACA,qCACA,wCACUC,GAAgBC,EAAYC,GAAgB,IAAM,GACpD9C,KAAKwC,aAIXO,iBAvDF,SAuDA,OACIC,GAAK,SAAT,GACMC,EAAGC,MACT,sDACA,kBACQ,QAAR,+BACQ,QAAR,qBACQ,EAAR,0BACQ,EAAR,kDAUU,OATA,EAAV,MACY,OAAZ,CACc,GAAd,4BAEY,QAAZ,KACY,MAAZ,KACY,MAAZ,IAEU,EAAV,mBACA,KAEQ,QAAR,eACQ,EAAR,+BACQ,OAAR,6CAKEC,iBAlFF,SAkFA,OAEIC,OAAOC,oBAAoB,SAAUrD,KAAK2C,UAC1CK,MCpHoV,I,wBCQpVM,EAAY,eACd,EACAxD,EACA8B,GACA,EACA,KACA,WACA,MAIa,aAAA0B,E,sECnBf","file":"js/chunk-b58b5fd4.eef82990.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rankingser\"},[_c('router-link',{staticClass:\"fanhui iconfont icon-back_icon\",attrs:{\"tag\":\"div\",\"to\":\"/\"}}),(_vm.listInfos)?_c('div',{staticClass:\"rankingserson\"},[_c('img',{attrs:{\"src\":(\"\" + (_vm.listInfos.coverImgUrl)),\"alt\":\"\"}})]):_vm._e(),_c('div',{staticClass:\"musicnewset\"},[_vm._l((_vm.hotLists),function(track){return _c('newest-music',{key:track.id,attrs:{\"item\":track,\"musicID\":_vm.musicID},on:{\"play\":function($event){return _vm.$emit('play', $event)}}})}),(_vm.isLoading || _vm.hotLists.length != _vm.allList.length)?_c('loading'):_vm._e(),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allList.length > 0),expression:\"allList.length > 0\"}],staticClass:\"loadingert\"},[_vm._v(\" \"+_vm._s(_vm.hotLists.length == _vm.allList.length ? \"已经没有更多啦~\" : \"加载中...\")+\" \")])],2),_c('div',{staticClass:\"musicbottom\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"rankingser\">\r\n    <router-link\r\n      class=\"fanhui iconfont icon-back_icon\"\r\n      tag=\"div\"\r\n      to=\"/\"\r\n    ></router-link>\r\n    <div class=\"rankingserson\" v-if=\"listInfos\">\r\n      <img :src=\"`${listInfos.coverImgUrl}`\" alt=\"\" />\r\n    </div>\r\n    <div class=\"musicnewset\">\r\n      <newest-music\r\n        v-for=\"track in hotLists\"\r\n        :key=\"track.id\"\r\n        :item=\"track\"\r\n        @play=\"$emit('play', $event)\"\r\n        :musicID=\"musicID\"\r\n      ></newest-music>\r\n      <loading v-if=\"isLoading || hotLists.length != allList.length\" />\r\n      <p class=\"loadingert\" v-show=\"allList.length > 0\">\r\n        {{\r\n          hotLists.length == allList.length ? \"已经没有更多啦~\" : \"加载中...\"\r\n        }}\r\n      </p>\r\n    </div>\r\n    <div class=\"musicbottom\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport NewestMusic from \"@/components/NewestMusic\";\r\nimport Loading from \"@/components/Loading\";\r\nexport default {\r\n  props: {\r\n    musicID: {\r\n      type: [Object, null],\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      listInfos: null,\r\n      hotLists: [],\r\n      //  热歌榜所有歌曲的数组\r\n      allList: [],\r\n      //  页码\r\n      page: 0,\r\n      // 每页加载的歌曲数目20\r\n      perpage: 20,\r\n      // 节奏条的显示隐藏\r\n      isLoading: true,\r\n      // 定时器\r\n      timer: null,\r\n    };\r\n  },\r\n  components: {\r\n    NewestMusic,\r\n    Loading,\r\n  },\r\n  methods: {\r\n    // 加载更多歌曲\r\n    loadMore() {\r\n      // 加载数据时显示\r\n      this.isLoading = true;\r\n      // 延迟0.8秒执行加载数据\r\n      clearInterval(this.timer);\r\n      this.timer = setTimeout(() => {\r\n        this.page++;\r\n        // 方法1:\r\n        let start = this.page * this.perpage;\r\n        let end = (this.page + 1) * this.perpage;\r\n        this.hotLists = this.hotLists.concat(this.allList.slice(start, end));\r\n        // 方法2:\r\n        // this.hotList = this.allList.slice(0,end);\r\n        // 数据加载完就隐藏\r\n      }, 800);\r\n      this.isLoading = false;\r\n    },\r\n    // 滚轮事件\r\n    onScroll() {\r\n      let scrollHeight = document.documentElement.scrollHeight;\r\n      let scrollTop = document.documentElement.scrollTop;\r\n      let clientHeight = document.documentElement.clientHeight;\r\n      if (scrollHeight - (scrollTop + clientHeight) - 50 <= 0) {\r\n        this.loadMore();\r\n      }\r\n    },\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.axios\r\n        .get(\"/playlist/detail?id=\" + vm.$route.query.usernameid)\r\n        .then((d) => {\r\n          console.log(vm.$route.query.usernameid);\r\n          console.log(d.data.playlist);\r\n          vm.listInfos = d.data.playlist;\r\n          vm.allList = d.data.playlist.tracks.map((data, index) => {\r\n            data.song = {\r\n              bMusic: {\r\n                sr: d.data.privileges[index].maxbr,\r\n              },\r\n              artists: data.ar,\r\n              album: data.al,\r\n              alias: [],\r\n            };\r\n            data.picUrl = data.al.picUrl;\r\n            return data;\r\n          });\r\n          console.log(vm.allList);\r\n          vm.hotLists = vm.allList.slice(0, 20);\r\n          window.addEventListener(\"scroll\", vm.onScroll);\r\n        });\r\n    });\r\n  },\r\n  //离开路由要移除滚动事件\r\n  beforeRouteLeave(to, from, next) {\r\n    //移除滚动.\r\n    window.removeEventListener(\"scroll\", this.onScroll);\r\n    next();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.rankingser {\r\n  .fanhui {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 10px;\r\n    color: white;\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    z-index: 9999;\r\n  }\r\n  .rankingserson {\r\n    height: 60vw;\r\n    overflow: hidden;\r\n    img {\r\n      margin-top: -20vw;\r\n    }\r\n  }\r\n  .musicnewset {\r\n    .newests {\r\n      &:first-child,\r\n      &:nth-child(2),\r\n      &:nth-child(3) {\r\n        color: #df3436;\r\n      }\r\n    }\r\n  }\r\n  .loadingert {\r\n    text-align: center;\r\n  }\r\n  .musicbottom {\r\n    width: 100%;\r\n    height: 12vw;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RankingListson.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RankingListson.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RankingListson.vue?vue&type=template&id=4ae8e6c8&scoped=true&\"\nimport script from \"./RankingListson.vue?vue&type=script&lang=js&\"\nexport * from \"./RankingListson.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RankingListson.vue?vue&type=style&index=0&id=4ae8e6c8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ae8e6c8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RankingListson.vue?vue&type=style&index=0&id=4ae8e6c8&lang=less&scoped=true&\""],"sourceRoot":""}